<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Name Picker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #bbdefb);
            color: #1a202c;
            min-height: 100vh;
            overflow-x: hidden;
            margin: 0;
        }

        .name-card {
            transition: all 0.3s ease;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .name-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .generate-btn {
            background: linear-gradient(to right, #4c51bf, #ed64a6);
            transition: transform 0.2s ease;
        }

        .generate-btn:hover {
            transform: scale(1.05);
        }

        .control-btn {
            background: #e2e8f0;
            color: #4a5568;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .control-btn:hover {
            background: #cbd5e0;
            transform: scale(1.05);
        }

        .control-btn.active {
            background: #68d391;
            color: white;
        }

        .favorite-btn {
            transition: color 0.3s ease;
        }

        .favorite-btn:hover {
            color: #ed64a6;
        }

        .filter-input, .filter-select {
            transition: all 0.3s ease;
        }

        .filter-input:focus, .filter-select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #introPage {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #4c51bf, #ed64a6);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 100;
            transition: opacity 0.5s ease;
        }

        #introPage.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .intro-btn {
            background: white;
            color: #4c51bf;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1.25rem;
            font-weight: 600;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .intro-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="flex flex-col">
    <!-- Intro Page -->
    <div id="introPage">
        <h1 class="text-5xl md:text-6xl font-bold mb-6 text-center">Baby Name Picker</h1>
        <p class="text-lg mb-8 text-center max-w-md">Tap to discover unique and meaningful names for your little buddy!</p>
        <button id="enterButton" class="intro-btn">Tap to Enter</button>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="container mx-auto px-4 py-12 flex-grow flex flex-col items-center hidden">
        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-center text-indigo-900">
            Baby Name Picker
        </h1>
        <p class="text-lg text-gray-600 mb-8 text-center max-w-md">
            Discover unique and meaningful names for your little one!
        </p>

        <!-- Filters -->
        <div class="w-full max-w-lg mb-8 flex flex-col md:flex-row gap-4">
            <input id="searchInput" type="text" placeholder="Search names..." class="filter-input w-full md:w-1/2 p-3 rounded-lg border border-gray-300 focus:border-indigo-500">
            <select id="genderFilter" class="filter-select w-full md:w-1/2 p-3 rounded-lg border border-gray-300 focus:border-indigo-500">
                <option value="all">All Genders</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="neutral">Gender Neutral</option>
            </select>
        </div>

        <!-- Generate Button -->
        <button id="generateButton" class="generate-btn text-white py-3 px-8 rounded-full mb-4 text-lg font-semibold">
            Pick a Name
        </button>

        <!-- Control Buttons -->
        <div class="flex gap-3 mb-8">
            <button id="playButton" class="control-btn py-2 px-4 rounded-full text-sm font-semibold">Play</button>
            <button id="pauseButton" class="control-btn py-2 px-4 rounded-full text-sm font-semibold">Pause</button>
            <button id="nextButton" class="control-btn py-2 px-4 rounded-full text-sm font-semibold">Next</button>
        </div>

        <!-- Names Container -->
        <div id="namesContainer" class="w-full max-w-2xl space-y-4"></div>

        <!-- Favorites Section -->
        <div class="w-full max-w-2xl mt-12">
            <h2 class="text-2xl font-semibold text-indigo-900 mb-4">Your Favorites</h2>
            <div id="favoritesContainer" class="space-y-4"></div>
        </div>
    </div>

    <script>
        // Expanded name database
        const nameDatabase = [
            { name: 'Aria', origin: 'Italian', meaning: 'Song or melody', gender: 'female' },
            { name: 'Kai', origin: 'Hawaiian', meaning: 'Sea', gender: 'neutral' },
            { name: 'Zara', origin: 'Arabic', meaning: 'Blooming flower', gender: 'female' },
            { name: 'Rowan', origin: 'Gaelic', meaning: 'Little red one', gender: 'neutral' },
            { name: 'Nova', origin: 'Latin', meaning: 'New', gender: 'female' },
            { name: 'Ezra', origin: 'Hebrew', meaning: 'Helper', gender: 'male' },
            { name: 'Luna', origin: 'Latin', meaning: 'Moon', gender: 'female' },
            { name: 'Sage', origin: 'Latin', meaning: 'Wise', gender: 'neutral' },
            { name: 'Atlas', origin: 'Greek', meaning: 'To carry', gender: 'male' },
            { name: 'Phoenix', origin: 'Greek', meaning: 'Dark red', gender: 'neutral' },
            { name: 'Seren', origin: 'Welsh', meaning: 'Star', gender: 'female' },
            { name: 'Orion', origin: 'Greek', meaning: 'Rising in the sky', gender: 'male' },
            { name: 'Raven', origin: 'English', meaning: 'Black bird', gender: 'neutral' },
            { name: 'Ember', origin: 'English', meaning: 'Burning coal', gender: 'neutral' },
            { name: 'Lyra', origin: 'Greek', meaning: 'Lyre', gender: 'female' },
            { name: 'Finn', origin: 'Irish', meaning: 'Fair', gender: 'male' },
            { name: 'Mila', origin: 'Slavic', meaning: 'Gracious', gender: 'female' },
            { name: 'Theo', origin: 'Greek', meaning: 'Gift of God', gender: 'male' },
            { name: 'Ivy', origin: 'English', meaning: 'Climbing vine', gender: 'female' },
            { name: 'Jasper', origin: 'Persian', meaning: 'Bringer of treasure', gender: 'male' },
            { name: 'Willow', origin: 'English', meaning: 'Graceful', gender: 'female' },
            { name: 'Remy', origin: 'French', meaning: 'Oarsman', gender: 'neutral' },
            { name: 'Esme', origin: 'French', meaning: 'Loved', gender: 'female' },
            { name: 'Cairo', origin: 'Arabic', meaning: 'Victorious', gender: 'male' },
            { name: 'Juni', origin: 'Latin', meaning: 'Youthful', gender: 'female' },
            { name: 'Zephyr', origin: 'Greek', meaning: 'West wind', gender: 'neutral' },
            { name: 'Amara', origin: 'African', meaning: 'Eternal', gender: 'female' },
            { name: 'Silas', origin: 'Latin', meaning: 'Forest', gender: 'male' },
            { name: 'Hazel', origin: 'English', meaning: 'Hazelnut tree', gender: 'female' },
            { name: 'Arlo', origin: 'English', meaning: 'Fortified hill', gender: 'male' }
        ];

        // DOM Elements
        const introPage = document.getElementById('introPage');
        const enterButton = document.getElementById('enterButton');
        const mainApp = document.getElementById('mainApp');
        const generateButton = document.getElementById('generateButton');
        const playButton = document.getElementById('playButton');
        const pauseButton = document.getElementById('pauseButton');
        const nextButton = document.getElementById('nextButton');
        const namesContainer = document.getElementById('namesContainer');
        const favoritesContainer = document.getElementById('favoritesContainer');
        const searchInput = document.getElementById('searchInput');
        const genderFilter = document.getElementById('genderFilter');

        // Favorites and session storage
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let sessionNames = JSON.parse(sessionStorage.getItem('sessionNames')) || [];
        let isPlaying = false;
        let cycleInterval;

        // Render name card
        function renderNameCard(nameObj, container, isFavorite = false) {
            const nameCard = document.createElement('div');
            nameCard.classList.add('name-card', 'p-6', 'fade-in');
            nameCard.innerHTML = `
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-bold text-indigo-900">${nameObj.name}</h2>
                    <button class="favorite-btn text-2xl ${favorites.some(fav => fav.name === nameObj.name) ? 'text-pink-500' : 'text-gray-400'}" data-name="${nameObj.name}">
                        ${favorites.some(fav => fav.name === nameObj.name) ? '♥' : '♡'}
                    </button>
                </div>
                <p class="text-sm text-gray-600 mt-2">
                    Origin: ${nameObj.origin} | Meaning: ${nameObj.meaning} | Gender: ${nameObj.gender.charAt(0).toUpperCase() + nameObj.gender.slice(1)}
                </p>
            `;
            container.insertBefore(nameCard, container.firstChild);
            if (container.children.length > 5 && !isFavorite) {
                container.removeChild(container.lastChild);
            }
        }

        // Render favorites
        function renderFavorites() {
            favoritesContainer.innerHTML = '';
            favorites.forEach(nameObj => renderNameCard(nameObj, favoritesContainer, true));
        }

        // Filter names
        function filterNames() {
            const searchTerm = searchInput.value.toLowerCase();
            const gender = genderFilter.value;
            return nameDatabase.filter(nameObj => {
                const matchesSearch = nameObj.name.toLowerCase().includes(searchTerm);
                const matchesGender = gender === 'all' || nameObj.gender === gender;
                return matchesSearch && matchesGender;
            });
        }

        // Generate a batch of fresh names
        function generateFreshBatch() {
            namesContainer.innerHTML = '';
            const filteredNames = filterNames();
            if (filteredNames.length === 0) {
                namesContainer.innerHTML = '<p class="text-center text-gray-500">No names match your criteria.</p>';
                return;
            }
            const availableNames = filteredNames.filter(nameObj => !sessionNames.some(sn => sn.name === nameObj.name));
            if (availableNames.length === 0) {
                namesContainer.innerHTML = '<p class="text-center text-gray-500">No new names available. Try resetting filters or starting a new session.</p>';
                return;
            }
            const numNames = Math.min(5, availableNames.length);
            const shuffled = availableNames.sort(() => 0.5 - Math.random());
            for (let i = 0; i < numNames; i++) {
                const nameObj = shuffled[i];
                sessionNames.push(nameObj);
                renderNameCard(nameObj, namesContainer);
            }
            sessionStorage.setItem('sessionNames', JSON.stringify(sessionNames));
        }

        // Start auto-cycling names
        function startCycling() {
            if (!isPlaying) {
                isPlaying = true;
                playButton.classList.add('active');
                pauseButton.classList.remove('active');
                cycleInterval = setInterval(() => {
                    generateFreshBatch();
                }, 5000); // Cycle every 5 seconds
            }
        }

        // Pause auto-cycling
        function pauseCycling() {
            if (isPlaying) {
                isPlaying = false;
                playButton.classList.remove('active');
                pauseButton.classList.add('active');
                clearInterval(cycleInterval);
            }
        }

        // Transition from intro to main app
        enterButton.addEventListener('click', () => {
            introPage.classList.add('hidden');
            mainApp.classList.remove('hidden');
            generateFreshBatch();
            renderFavorites();
            startCycling(); // Start cycling on entry
        });

        // Generate single random name
        generateButton.addEventListener('click', () => {
            pauseCycling(); // Pause cycling when manually picking a name
            const filteredNames = filterNames();
            if (filteredNames.length === 0) {
                namesContainer.innerHTML = '<p class="text-center text-gray-500">No names match your criteria.</p>';
                return;
            }
            const availableNames = filteredNames.filter(nameObj => !sessionNames.some(sn => sn.name === nameObj.name));
            if (availableNames.length === 0) {
                namesContainer.innerHTML = '<p class="text-center text-gray-500">No new names available. Try resetting filters.</p>';
                return;
            }
            const nameObj = availableNames[Math.floor(Math.random() * availableNames.length)];
            sessionNames.push(nameObj);
            sessionStorage.setItem('sessionNames', JSON.stringify(sessionNames));
            renderNameCard(nameObj, namesContainer);
        });

        // Play button
        playButton.addEventListener('click', () => {
            startCycling();
        });

        // Pause button
        pauseButton.addEventListener('click', () => {
            pauseCycling();
        });

        // Next button
        nextButton.addEventListener('click', () => {
            pauseCycling(); // Pause cycling when manually advancing
            generateFreshBatch();
        });

        // Handle favorite button
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('favorite-btn')) {
                const name = e.target.dataset.name;
                const nameObj = nameDatabase.find(n => n.name === name);
                if (favorites.some(fav => fav.name === name)) {
                    favorites = favorites.filter(fav => fav.name !== name);
                    e.target.innerHTML = '♡';
                    e.target.classList.remove('text-pink-500');
                    e.target.classList.add('text-gray-400');
                } else {
                    favorites.push(nameObj);
                    e.target.innerHTML = '♥';
                    e.target.classList.remove('text-gray-400');
                    e.target.classList.add('text-pink-500');
                }
                localStorage.setItem('favorites', JSON.stringify(favorites));
                renderFavorites();
            }
        });

        // Filter event listeners
        searchInput.addEventListener('input', () => {
            pauseCycling(); // Pause cycling when filters change
            generateFreshBatch();
        });
        genderFilter.addEventListener('change', () => {
            pauseCycling(); // Pause cycling when filters change
            generateFreshBatch();
        });
    </script>
</body>
</html>
